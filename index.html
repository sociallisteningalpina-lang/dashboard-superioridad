
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Panel Interactivo: Campa帽a de Nutrici贸n</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
        <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
            .container { max-width: 1400px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
            .header { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 30px; text-align: center; }
            .header h1 { font-size: 2.5em; }
            .filters { padding: 20px 30px; background: #f8f9fa; display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 15px; border-bottom: 1px solid #dee2e6; }
            .filters label { font-weight: bold; margin-left: 10px; }
            .filters input[type="date"], .filters input[type="time"] { padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
            .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 30px; background: #f8f9fa; }
            .stat-card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); text-align: center; }
            .stat-number { font-size: 3em; font-weight: bold; margin-bottom: 10px; }
            .positive { color: #28a745; } .negative { color: #dc3545; } .neutral { color: #ffc107; } .total { color: #007bff; }
            .charts-section, .insights-section, .comments-section { padding: 30px; }
            .section-title { font-size: 1.8em; margin-bottom: 25px; text-align: center; color: #333; }
            .charts-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 30px; align-items: start; margin-bottom: 30px;}
            .chart-container { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); position: relative; height: 400px; }
            .chart-container.full-width { grid-column: 1 / -1; }
            .insights-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
            .insight-card { background: #f0f2f5; padding: 20px; border-radius: 10px; border-left: 5px solid #007bff; }
            .comment-item { margin: 15px 0; padding: 15px; border-radius: 10px; border-left: 5px solid; word-wrap: break-word; }
            .comment-positive { border-left-color: #28a745; background: #d4edda; } .comment-negative { border-left-color: #dc3545; background: #f8d7da; } .comment-neutral { border-left-color: #ffc107; background: #fff3cd; }
            @media (max-width: 900px) { 
                .charts-grid { grid-template-columns: 1fr; } 
            }
        </style>
    </head>
    <body>
        <script id="data-store" type="application/json">
            [{"date": "2025-09-12T14:30:46", "comment": "Eran alpina eras ma\u0301s che\u0301vere antes", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-12T06:55:16", "comment": "Jajajaja Pero es IA gaxxxxx", "sentiment": "Neutro", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-11T17:54:31", "comment": "Pero porque todo con ia", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-12T12:55:33", "comment": "No usen ia, esta horrible ese anuncio", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-12T12:40:47", "comment": "Tienen recursos de sobra para contratar un artista 3D y en lugar de hacerlo suben esta basura hecha con AI, que\u0301 le dice eso al consumidor sobre sus productos?\nTambie\u0301n dejan en manos de la AI su control de salubridad?", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-11T20:53:31", "comment": "Q hpta asco hahahaha", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-12T07:37:34", "comment": "Pinchi animacio\u0301n toda culera, si van a invertir en hacer animacio\u0301n, inviertan en una buena IA", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-12T01:56:03", "comment": "Si, se ve poco real esa animacio\u0301n. ojala\u0301 la IA les compres sus productos.", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-12T00:33:09", "comment": "..", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-11T16:10:54", "comment": "Hay un poco de IA en tu animacio\u0301n \ud83e\udd22", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-11T19:08:08", "comment": "Hese cuatro pelos hp solo a echo es robar al pueblo y volverse rico", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T21:11:53", "comment": "Supuestamente alpina promoviendo lo tradicional y lo hecho en casa, y proceden a subir este horrible comercial hecho con IA, acaban de matar a sangre fri\u0301a toda la imagen que llevan an\u0303os construyendo. Que\u0301 tristeza", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T02:24:56", "comment": "usaba IA y ni sentido teni\u0301a el anuncio", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T17:04:54", "comment": "empresa multimillonaria no tiene dinero para pagarle a un artista por hacer animacio\u0301n \ud83d\ude00", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T16:41:19", "comment": "Se me cayo\u0301 un i\u0301dolo, en la mala Alpina", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T19:23:43", "comment": "Como que les pesa mucho pagarle a un artista que si haga algo bueno", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T14:00:57", "comment": "\u00bfIA? Wow ,tanto que ganan y no pagan un animador", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T16:40:46", "comment": "Recuerdan esos comerciales de animales bailando en el bosque y cantando?", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T15:26:29", "comment": "Primero las chocolatinas Jet, luego las paletas Dra\u0301cula y Ahora alpina. los empresarios los esta matando la pereza definitivamente", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T18:18:02", "comment": "espero que con esto bajen los precios ya que quieren economizar las experiencias de sus consumidores", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T08:12:39", "comment": "Bro como se perdio\u0301 el arte", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T11:54:37", "comment": "se ve barato con la AI alpina que dececion", "sentiment": "Positivo", "topic": "Calidad del Contenido"}, {"date": "2025-09-10T16:53:16", "comment": "Bravo, desempleando animadores \ud83d\udc4f\ud83c\udffb pudiendo contratar a alguien usan a la IA y no se siente igual de vivo a diferencia de alguien que lo dibuje", "sentiment": "Neutro", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T15:33:29", "comment": "sin presupuesto para publicidad , como sera el producto?", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T15:56:02", "comment": "increible el esfuerzo wow. \ud83d\udc94\ud83e\udd40", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T03:37:51", "comment": "Alpin que paso para llegar hasta este punto?", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T14:11:04", "comment": "IA \ud83d\ude2c", "sentiment": "Neutro", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T19:28:04", "comment": "tanto que ganan y ni un animador se dignan a pagar, el colmo.", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T16:29:42", "comment": "IA enserio?", "sentiment": "Neutro", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T08:11:37", "comment": "Ni que no tuvieran plata para pagarle a un animador. Menos mal ahora la IA no se puede registrar con derechos de autor.", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T16:42:51", "comment": "Un anuncio de IA, en serio?...", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T22:57:06", "comment": "Si usan IA no me fi\u0301o de los procesos de sus la\u0301cteos \ud83d\ude05", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T17:22:52", "comment": "Con historias creatividad y mucha nutricio\u0301n Alimentamos saludablemente a nuestra Familia!! \ud83d\udc99\ud83d\udc99\ud83d\udc99", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T21:22:18", "comment": "y la de dibujar no se la saben? no es como que no sean una empresa gigante que no puede costearse una animacio\u0301n real xdd", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T17:52:21", "comment": "una historia muy original \ud83d\udc99 Alpina llegando a nuestros hogares por ma\u0301s de 80 an\u0303os \ud83e\udd17", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T17:19:01", "comment": "que lindo es ver este tipo de videos tan lindos llenos de amor y nutricio\u0301n \ud83d\ude0b", "sentiment": "Positivo", "topic": "Calidad del Contenido"}, {"date": "2025-09-10T17:27:21", "comment": "Excelente estrategia de marca, La conexio\u0301n emocional con el consumidor a trave\u0301s de la pasio\u0301n por la vida y la naturaleza es clave para generar lealtad y Engagement, 80 an\u0303os nutriendo un man\u0303ana \ud83d\udc99", "sentiment": "Positivo", "topic": "Estrategia de Marketing"}, {"date": "2025-09-10T18:13:29", "comment": "Otra muestra, de que Alpina tiene el mejor talento, asi\u0301 como el mejor sabor.!!!!", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T18:24:24", "comment": "Divino!!!! Amo la historia", "sentiment": "Positivo", "topic": "Calidad del Contenido"}, {"date": "2025-09-10T04:43:05", "comment": "tan lindo comercial \ud83e\udd70\ud83e\udd70\ud83e\udd70\ud83e\udd70\ud83e\udd70", "sentiment": "Positivo", "topic": "Calidad del Contenido"}, {"date": "2025-09-10T17:48:44", "comment": "\u00a1Que\u0301 campan\u0303a tan increi\u0301ble! \ud83e\udde1 Me encanta co\u0301mo Alpina logra transmitir tanta energi\u0301a positiva y recordarnos lo importante de nutrirnos con todo lo bueno de sus la\u0301cteos. \ud83d\ude4c Genial la creatividad y el talento detra\u0301s de esta campan\u0303a, realmente conecta. \ud83d\udcaa\ud83e\udd5b", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T06:18:27", "comment": "deseo vender sus productos\ngracias", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T18:07:46", "comment": "Me encanta \ud83d\udc99", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T05:14:26", "comment": "Me veo linda en mi historia?", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-11T17:45:59", "comment": "Me encanta \ud83d\udc99", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T10:22:09", "comment": "Que\u0301 linda esta\u0301 historiaa! Me encanta", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T12:17:19", "comment": "Muy mal alpina \ud83d\ude14", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T06:29:18", "comment": "contratar a una persona no cuesta mucho Alpina", "sentiment": "Neutro", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T17:43:36", "comment": "que es eso alpina", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T18:43:44", "comment": "ia?", "sentiment": "Neutro", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T05:46:50", "comment": "Un cliente menos por usar IA. Lo mi\u0301nimo seri\u0301a que se esforzaran.", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T05:44:40", "comment": "esa ia que, bajenle el sueldo al del marketing", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T05:03:02", "comment": "la ia mato la originalidad, extran\u0303o los anuncios de antes de alpin", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T01:10:45", "comment": "Ya le dan pereza hacer una animacio\u0301n ya hasta usan IA", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T01:41:38", "comment": "que bajo usar ia.", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T05:36:32", "comment": "Q acabo de ver \ud83d\ude14", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T03:49:51", "comment": "Uno espera eso de marcas chiquitas que no les alcanza para publicidad", "sentiment": "Negativo", "topic": "Estrategia de Marketing"}, {"date": "2025-09-10T08:49:35", "comment": "IA \ud83d\udc80\ud83d\udc80\ud83d\udc80\ud83d\udc80", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T04:22:27", "comment": "tra\u0301tame serio", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T16:35:01", "comment": "co\u0301mo disen\u0303adora y futura animadora, me duele ver que\u0301 usa IA. sabiendo que es una empresa millonaria", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T05:32:13", "comment": "por eso es mejor la marca pureza", "sentiment": "Positivo", "topic": "Estrategia de Marketing"}, {"date": "2025-09-10T13:13:45", "comment": "hasta yo que no se animar lo hago mejor", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T16:21:49", "comment": "Asi\u0301 de artificial son los nutriente \ud83d\ude05", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T14:07:32", "comment": "duro de ver", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T14:30:21", "comment": "no les doli\u0301a tanto e bolsillo comisionar a un artista de verdad sabes??\ud83d\ude05\ud83d\ude05", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T12:37:31", "comment": "Bro?\ud83d\udc80", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T12:20:34", "comment": "Que horrible anuncio, acaso esta\u0301n a punto de llegar a la quiebra que no le pagan a animadores de verdad?", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T08:58:12", "comment": "Uy amigos por lo menos disimulen la ia porque se ve horrible ese comercial", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-11T00:33:20", "comment": "Dios la animacion hizo que sangraran mis ojos", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T02:55:57", "comment": "Alpina, una de las marcas ma\u0301s reconocidas y exitosas del pai\u0301s, no tiene para pagarle a un estudio de animacio\u0301n y le dieron ese trabajo al primer tipo que sugirio\u0301 escribir prompts y sacar este anuncio tan flojo y feo", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T05:39:29", "comment": "Contraten artistas reales, tacan\u0303os", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T21:36:44", "comment": "WAKALA LA IA mejor no compro alpina", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T19:23:57", "comment": "No que porqueri\u0301a AJAJAJAJAJJA", "sentiment": "Negativo", "topic": "Otros"}, {"date": "2025-09-10T16:17:34", "comment": "Cada que una empresa usa IA en una publicidad, le cojo fastidio y no me provoca comprarles... :/ wacala", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T13:28:41", "comment": "Si su calidad es igual a usar IA, no me imagino una muy buena calidad entonces, que asco", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T19:07:18", "comment": "CONTRATEN ARTISTAS, ANIMADORES Y PRODUCTORES PARA SUS ANUNCIOS, NO SEAN TACAN\u0303OS", "sentiment": "Negativo", "topic": "Apoyo a Artistas"}, {"date": "2025-09-10T19:34:50", "comment": "@Alpina \ud83d\udc2e como marca Colombiana es triste que no apoyen a la industria de la animacio\u0301n por nosotros los colombianos. Co\u0301mo marca iconica podri\u0301an ser impulsadores de creatividad apoyando el arte de los animadores del pai\u0301s en lugar de recurrir a lo facil y barato con la IA. Muy decepcionante..", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T16:54:33", "comment": "Siempre que hacen publicidad con IA no tiene ningu\u0301n sentido tema\u0301tico. Pa\u0301guenle a un ser humano", "sentiment": "Negativo", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T15:48:40", "comment": "esa ia \ud83d\udc80", "sentiment": "Neutro", "topic": "Cr\u00edticas a la IA"}, {"date": "2025-09-10T19:21:28", "comment": "Super chevere esta\u0301 historia, entretenida y deliciosa como Alpina.\ud83e\udee0\ud83d\udc99", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T17:11:06", "comment": "A mi me encanto!, Tomas Montoya y su equipo da\u0301ndola todaaa.\ud83d\udc99\ud83d\ude0e", "sentiment": "Positivo", "topic": "Otros"}, {"date": "2025-09-10T17:03:00", "comment": "Para averiguar la contrasen\u0303a de cualquier red Wi-Fi abre Google y busca GOG6 Ve al primer sitio y escribe el nombre de la red Aparecera\u0301 la contrasen\u0303a", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T19:43:09", "comment": "\u2022\u1dc4 \u0847\u2022\u1dc5", "sentiment": "Neutro", "topic": "Otros"}, {"date": "2025-09-10T23:44:43", "comment": "La kgada va en la taza", "sentiment": "Negativo", "topic": "Otros"}]
        </script>

        <div class="container">
            <div class="header"><h1> Panel Interactivo: Campa帽a de Nutrici贸n</h1></div>
            
            <div class="filters">
                <label for="startDate">Fecha Inicio:</label>
                <input type="date" id="startDate" value="2025-09-10">
                <input type="time" id="startTime" value="00:00">
                <label for="endDate">Fecha Fin:</label>
                <input type="date" id="endDate" value="2025-09-12">
                <input type="time" id="endTime" value="23:59">
            </div>

            <div id="stats-grid" class="stats-grid"></div>
            
            <section class="charts-section">
                <h2 class="section-title">An谩lisis de Sentimientos y Temas</h2>
                <div class="charts-grid">
                    <div class="chart-container"><canvas id="sentimentChart"></canvas></div>
                    <div class="chart-container"><canvas id="topicsChart"></canvas></div>
                    <div class="chart-container full-width"><canvas id="sentimentByTopicChart"></canvas></div>
                    <div class="chart-container full-width"><canvas id="hourlyChart"></canvas></div>
                </div>
            </section>

            <section id="insights-section" class="insights-section" style="background: #f8f9fa;"></section>
            
            <section class="comments-section">
                <h2 class="section-title"> Comentarios Filtrados</h2>
                <div id="comments-list"></div>
            </section>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const dataStoreElement = document.getElementById('data-store');
                const allData = JSON.parse(dataStoreElement.textContent);

                const startDateInput = document.getElementById('startDate');
                const startTimeInput = document.getElementById('startTime');
                const endDateInput = document.getElementById('endDate');
                const endTimeInput = document.getElementById('endTime');

                const charts = {
                    sentiment: new Chart(document.getElementById('sentimentChart'), { type: 'doughnut', options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Distribuci贸n de Sentimientos' } } } }),
                    topics: new Chart(document.getElementById('topicsChart'), { type: 'bar', options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', plugins: { legend: { display: false }, title: { display: true, text: 'Temas Principales' } } } }),
                    sentimentByTopic: new Chart(document.getElementById('sentimentByTopicChart'), { type: 'bar', options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { stacked: true }, y: { stacked: true } }, plugins: { title: { display: true, text: 'Sentimiento por Tema' } } } }),
                    hourly: new Chart(document.getElementById('hourlyChart'), { type: 'bar', options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true, position: 'left', title: { display: true, text: 'Comentarios por Hora' } }, y1: { position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Total Acumulado' } } }, plugins: { title: { display: true, text: 'Volumen de Comentarios por Hora' } } } })
                };

                const updateDashboard = () => {
                    const startFilter = startDateInput.value + 'T' + startTimeInput.value + ':00';
                    const endFilter = endDateInput.value + 'T' + endTimeInput.value + ':59';
                    const filteredData = allData.filter(d => d.date >= startFilter && d.date <= endFilter);
                    
                    updateStats(filteredData);
                    updateCharts(filteredData);
                    updateInsights(filteredData);
                    updateCommentsList(filteredData);
                };
                
                const updateStats = (data) => {
                    const total = data.length;
                    const sentiments = data.reduce((acc, curr) => { acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1; return acc; }, {});
                    const pos = sentiments['Positivo'] || 0;
                    const neg = sentiments['Negativo'] || 0;
                    const neu = sentiments['Neutro'] || 0;
                    document.getElementById('stats-grid').innerHTML = `
                        <div class="stat-card"><div class="stat-number total">${total}</div><div>Total Comentarios</div></div>
                        <div class="stat-card"><div class="stat-number positive">${pos}</div><div>Positivos (${(total > 0 ? (pos / total * 100) : 0).toFixed(1)}%)</div></div>
                        <div class="stat-card"><div class="stat-number negative">${neg}</div><div>Negativos (${(total > 0 ? (neg / total * 100) : 0).toFixed(1)}%)</div></div>
                        <div class="stat-card"><div class="stat-number neutral">${neu}</div><div>Neutros (${(total > 0 ? (neu / total * 100) : 0).toFixed(1)}%)</div></div>
                    `;
                };

                const updateInsights = (data) => {
                    if (data.length === 0) {
                        document.getElementById('insights-section').innerHTML = '<h2 class="section-title"> Conclusiones Clave</h2><p style="text-align:center;">No hay datos para el rango de fechas seleccionado.</p>';
                        return;
                    }
                    const sentiments = data.reduce((acc, curr) => { acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1; return acc; }, {});
                    const topics = data.reduce((acc, curr) => { acc[curr.topic] = (acc[curr.topic] || 0) + 1; return acc; }, {});
                    const predominantSentiment = Object.keys(sentiments).length > 0 ? Object.keys(sentiments).reduce((a, b) => sentiments[a] > sentiments[b] ? a : b) : "N/A";
                    const topTopic = Object.keys(topics).length > 0 ? Object.keys(topics).reduce((a, b) => topics[a] > topics[b] ? a : b) : "N/A";
                    document.getElementById('insights-section').innerHTML = `
                        <h2 class="section-title"> Conclusiones Clave</h2>
                        <div class="insights-grid">
                            <div class="insight-card"><p>El sentimiento predominante fue <strong>${predominantSentiment}</strong>, con un <strong>${(sentiments[predominantSentiment] / data.length * 100).toFixed(1)}%</strong> de los comentarios.</p></div>
                            <div class="insight-card"><p>El tema principal fue <strong>'${topTopic}'</strong>, representando el <strong>${(topics[topTopic] / data.length * 100).toFixed(1)}%</strong> de la discusi贸n.</p></div>
                            <div class="insight-card"><p>Se analizaron <strong>${data.length}</strong> comentarios en el per铆odo seleccionado.</p></div>
                        </div>
                    `;
                };

                const updateCommentsList = (data) => {
                    const sentimentToCss = { 'Positivo': 'positive', 'Negativo': 'negative', 'Neutro': 'neutral' };
                    const listHtml = data.sort((a, b) => b.date.localeCompare(a.date)).slice(0, 200).map((d, i) => {
                        const escapedComment = d.comment.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                        return `<div class="comment-item comment-${sentimentToCss[d.sentiment]}">
                                    <div class="comment-header"><strong>[${d.sentiment.toUpperCase()}] (Tema: ${d.topic})</strong> - ${escapedComment}</div>
                                </div>`;
                    }).join('');
                    document.getElementById('comments-list').innerHTML = listHtml || "<p style='text-align:center;'>No hay comentarios en este rango de fechas.</p>";
                };

                const updateCharts = (data) => {
                    const sentimentCounts = data.reduce((acc, curr) => { acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1; return acc; }, {});
                    charts.sentiment.data.labels = ['Positivo', 'Negativo', 'Neutro'];
                    charts.sentiment.data.datasets = [{ data: [sentimentCounts['Positivo']||0, sentimentCounts['Negativo']||0, sentimentCounts['Neutro']||0], backgroundColor: ['#28a745', '#dc3545', '#ffc107'] }];
                    charts.sentiment.update();
                    const topicCounts = data.reduce((acc, curr) => { acc[curr.topic] = (acc[curr.topic] || 0) + 1; return acc; }, {});
                    const sortedTopics = Object.entries(topicCounts).sort((a, b) => b[1] - a[1]);
                    charts.topics.data.labels = sortedTopics.map(d => d[0]);
                    charts.topics.data.datasets = [{ label: 'Comentarios', data: sortedTopics.map(d => d[1]), backgroundColor: '#3498db' }];
                    charts.topics.update();
                    const sbtCounts = data.reduce((acc, curr) => { if (!acc[curr.topic]) acc[curr.topic] = { Positivo: 0, Negativo: 0, Neutro: 0 }; acc[curr.topic][curr.sentiment]++; return acc; }, {});
                    const sbtLabels = Object.keys(sbtCounts).sort((a,b) => (sbtCounts[b].Positivo + sbtCounts[b].Negativo + sbtCounts[b].Neutro) - (sbtCounts[a].Positivo + sbtCounts[a].Negativo + sbtCounts[a].Neutro));
                    charts.sentimentByTopic.data.labels = sbtLabels;
                    charts.sentimentByTopic.data.datasets = [ { label: 'Positivo', data: sbtLabels.map(l => sbtCounts[l].Positivo), backgroundColor: '#28a745' }, { label: 'Negativo', data: sbtLabels.map(l => sbtCounts[l].Negativo), backgroundColor: '#dc3545' }, { label: 'Neutro', data: sbtLabels.map(l => sbtCounts[l].Neutro), backgroundColor: '#ffc107' } ];
                    charts.sentimentByTopic.update();
                    const hourlyCounts = data.reduce((acc, curr) => { const hour = curr.date.substring(0, 13) + ':00:00'; if (!acc[hour]) acc[hour] = { Positivo: 0, Negativo: 0, Neutro: 0, Total: 0 }; acc[hour][curr.sentiment]++; acc[hour].Total++; return acc; }, {});
                    const sortedHours = Object.keys(hourlyCounts).sort();
                    let cumulative = 0;
                    const cumulativeData = sortedHours.map(h => { cumulative += hourlyCounts[h].Total; return cumulative; });
                    charts.hourly.data.labels = sortedHours.map(h => new Date(h).toLocaleString('es-CO', { day: '2-digit', month: 'short', hour: '2-digit', minute:'2-digit' }));
                    charts.hourly.data.datasets = [ { label: 'Positivo', data: sortedHours.map(h => hourlyCounts[h].Positivo), backgroundColor: '#28a745', yAxisID: 'y' }, { label: 'Negativo', data: sortedHours.map(h => hourlyCounts[h].Negativo), backgroundColor: '#dc3545', yAxisID: 'y' }, { label: 'Neutro', data: sortedHours.map(h => hourlyCounts[h].Neutro), backgroundColor: '#ffc107', yAxisID: 'y' }, { label: 'Acumulado', type: 'line', data: cumulativeData, borderColor: '#007bff', yAxisID: 'y1' } ];
                    charts.hourly.update();
                };

                startDateInput.addEventListener('change', updateDashboard);
                startTimeInput.addEventListener('change', updateDashboard);
                endDateInput.addEventListener('change', updateDashboard);
                endTimeInput.addEventListener('change', updateDashboard);
                
                updateDashboard();
            });
        </script>
    </body>
    </html>
    